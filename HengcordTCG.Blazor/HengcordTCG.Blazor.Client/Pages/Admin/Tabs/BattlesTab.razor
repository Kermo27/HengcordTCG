@if (Leaderboard.Count == 0)
{
    <Card class="border-slate-800 bg-slate-900/50">
        <CardContent class="p-8 text-center">
            <LucideIcon Name="swords" Size="48" class="mx-auto mb-4 text-slate-600" />
            <p class="text-slate-400">No battles played yet.</p>
        </CardContent>
    </Card>
}
else
{
    <Card class="border-slate-800 bg-slate-900/50">
        <CardContent class="p-0">
            <div class="divide-y divide-slate-800">
                @for (int i = 0; i < Leaderboard.Count; i++)
                {
                    var entry = Leaderboard[i];
                    var rank = i;
                    <div class="flex items-center justify-between p-4 hover:bg-slate-800/50">
                        <div class="flex items-center gap-3">
                            <div class="w-10 h-10 rounded-full flex items-center justify-center font-bold text-lg @GetRankClass(rank)">
                                @GetRankDisplay(rank)
                            </div>
                            <div>
                                <div class="font-medium text-slate-200">@entry.Username</div>
                                <div class="text-sm text-slate-500">@entry.Wins W / @entry.Losses L</div>
                            </div>
                        </div>
                        <div class="text-right">
                            <div class="font-semibold @(entry.WinRate >= 50 ? "text-emerald-400" : "text-slate-400")">
                                @entry.WinRate% WR
                            </div>
                            <div class="text-xs text-slate-500">@(entry.Wins + entry.Losses) games</div>
                        </div>
                    </div>
                }
            </div>
        </CardContent>
    </Card>
}

@code {
    [Parameter] public List<HengcordTCGClient.LeaderboardEntry> Leaderboard { get; set; } = new();

    private string GetRankClass(int rank) => rank switch
    {
        0 => "bg-amber-500 text-white",
        1 => "bg-slate-300 text-slate-900",
        2 => "bg-amber-700 text-white",
        _ => "bg-slate-800 text-slate-400"
    };

    private string GetRankDisplay(int rank) => rank switch
    {
        0 => "ðŸ¥‡",
        1 => "ðŸ¥ˆ",
        2 => "ðŸ¥‰",
        _ => (rank + 1).ToString()
    };
}
